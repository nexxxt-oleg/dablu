document.addEventListener("DOMContentLoaded", () => {

    if(document.getElementById('homeSlider')) {
        new Swiper('#homeSlider', {
            spaceBetween: 30,
            navigation: {
                nextEl: '.home-slider .swiper-next',
                prevEl: '.home-slider .swiper-prev',
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    }

    if (document.getElementsByClassName("js-slider-cat").length) {

        const slCat = document.querySelectorAll('.js-slider-cat');

        slCat.forEach(el => {
            let parentBox = el.parentNode;
            let nextSl = parentBox.querySelector('.swiper-next');
            let prevSl = parentBox.querySelector('.swiper-prev');
            let pagSl = parentBox.querySelector('.swiper-scrollbar');

            new Swiper(el, {
                spaceBetween: 30,
                slidesPerView: 4,
                navigation: {
                    nextEl: nextSl,
                    prevEl: prevSl,
                },
                scrollbar: {
                    el: pagSl,
                    draggable: true,
                },
                breakpoints: {
                    300: {
                        slidesPerView: 2,
                        spaceBetween: 20
                    },
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 30
                    },
                    991: {
                        slidesPerView: 3,
                        spaceBetween: 30
                    },
                    1199: {
                        slidesPerView: 4,
                        spaceBetween: 30
                    }
                }
            });
        });
    }

    if(document.getElementById('brendsSl')) {
        new Swiper('#brendsSl', {
            spaceBetween: 30,
            slidesPerView: 'auto',
            navigation: {
                nextEl: '#brendsNext',
                prevEl: '#brendsPrev',
            },
           /* breakpoints: {
                320: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                768: {
                    slidesPerView: 3,
                    spaceBetween: 30
                },
                991: {
                    slidesPerView: 4,
                    spaceBetween: 30
                }
            }*/

        });
    }
    if(document.getElementById('brendsSl2')) {
        new Swiper('#brendsSl2', {
            spaceBetween: 30,
            slidesPerView: 6,
            navigation: {
                nextEl: '#brendsNext2',
                prevEl: '#brendsPrev2',
            },
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    spaceBetween: 20
                },
                768: {
                    slidesPerView: 3,
                    spaceBetween: 30
                },
                991: {
                    slidesPerView: 4,
                    spaceBetween: 30
                },
                1200: {
                    slidesPerView: 6,
                    spaceBetween: 30
                }
            }
        });
    }

    if(document.getElementById('gallerySl')) {
        new Swiper('#gallerySl', {
            spaceBetween: 30,
            navigation: {
                nextEl: '#gallerySlNext',
                prevEl: '#gallerySlPrev',
            },
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    spaceBetween: 20
                },
                768: {
                    slidesPerView: 1,
                    spaceBetween: 30
                }
            }

        });
    }


    Fancybox.bind("[data-fancybox]", {
        // Your custom options
    });

    if (document.getElementsByClassName("js-mask-phone").length) {
        const inpMask = document.querySelectorAll('.js-mask-phone');
        inpMask.forEach(el => {
            let im = new Inputmask("+7(999) 999-99-99",{ "clearIncomplete": true });
            im.mask(el);
        });
    }


    /*if(document.getElementById('searchHeader')) {
        let rect = document.getElementById('searchHeader').getBoundingClientRect();
        let searchRes = document.getElementById('searchRes');
        searchRes.style.top = rect.bottom + 'px';
        searchRes.style.left = rect.left + 'px';
        document.getElementById('searchHeader').addEventListener('input', function() {
            searchRes.style.display = 'block';
        });
    }*/

    document.getElementById('mobSearchOpen').addEventListener('click', function() {
        document.getElementById('searchTop').classList.toggle('show');
    });

    document.getElementById('mobSearchOpen').addEventListener('click', function() {
        document.getElementById('searchTop').classList.add('show');
    });

    document.getElementById('searchClose').addEventListener('click', function() {
        document.getElementById('searchTop').classList.remove('show');
    });

    if(document.getElementById('moreText')) {
        new Readmore('#moreText', {
            speed: 75,
            collapsedHeight: 148,
            moreLink: '<a href="#" class="more-link">Читать дальше <i class="down"></i></a>',
            lessLink: '<a href="#" class="more-link">Скрыть <i class="up"></i></a>'
        });
    }

    if(document.getElementById('openFilter')) {
        document.getElementById('openFilter').addEventListener('click', function() {
            document.getElementById('catalogFilter').classList.add('show');
            document.body.classList.add('show_filter');
        });
    }
    if(document.getElementById('catalogFilterClose')) {
        document.getElementById('catalogFilterClose').addEventListener('click', function() {
            document.getElementById('catalogFilter').classList.remove('show');
            document.body.classList.remove('show_filter');
        });
    }

    if(document.getElementById('thumbnail')) {
        let thumbnail = new Swiper('#thumbnail', {
            slidesPerView: 6,
            direction: 'vertical',
            watchSlidesProgress: true,
            navigation: {
                //nextEl: '#gallerySlNext',
                prevEl: '#thumbnailPrev',
            },
        });

        let productSl = new Swiper('#productImg', {
            thumbs: {
                swiper: thumbnail,
            },
            spaceBetween: 10,
            on: {
                init: function (sw) {
                    if(sw.slides.length > 6) {
                        document.getElementById('thumbnail').classList.add('show-nav');
                    }
                },
            },
        });
    }

});